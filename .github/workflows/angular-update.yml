name: Angular Updates

on: push

jobs:
  bump-version:
    name: Angular Update
    runs-on: ubuntu-latest
    steps:
      - name: Checkout source code
        uses: actions/checkout@v2
        with:
          ref: dev-angular-updates
      - name: Install dependencies
        run: npm ci
      - name: Copy binaries
        run: mkdir -p client/node_modules/@angular/cli/bin && cp -avr node_modules/@angular/cli/bin client/node_modules/@angular/cli/bin
      - name: Update Angular if necessary
        uses: tinesoft/ngx-uptodate@v1.1.0
        with:
          repo-token: ${{ secrets.BOT_TOKEN }}
          base-branch: dev-angular-updates
          project-path: client
          pr-title: "chore: update angular version"
          pr-reviewers: mark-j
          pr-assignees: marks-ci-bot
